var e=Object.defineProperty,t=Object.defineProperties,o=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertyNames,i=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(t,o,n)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[o]=n,l=(e,t)=>{for(var o in t||(t={}))a.call(t,o)&&r(e,o,t[o]);if(i)for(var o of i(t))s.call(t,o)&&r(e,o,t[o]);return e},c=(e,n)=>t(e,o(n)),p=(e,t,o)=>new Promise((n,i)=>{var a=e=>{try{r(o.next(e))}catch(t){i(t)}},s=e=>{try{r(o.throw(e))}catch(t){i(t)}},r=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,s);r((o=o.apply(e,t)).next())});import{c as d,j as u,G as m,D as g,o as f,a as h}from"./objectTransforms-DsFktLSo.js";import{r as b,R as x}from"./react-vendor-DtX1tuCI.js";import{r as y,V as v,s as j,t as w,u as k,Q as S,v as E,w as T,x as O,y as P,l as D,m as C,n as R,W as L,A as z,p as M,z as A,H as I,G as Y,M as N,a as H,I as Z,C as _,P as F,D as K,T as X,d as W}from"./three-BynlRSA_.js";var U,B,V=(U={"assets/controller-A0xWRM3Z.js"(e){
/**
     * @license lucide-react v0.300.0 - ISC
     *
     * This source code is licensed under the ISC license.
     * See the LICENSE file in the root directory of this source tree.
     */
const t=d("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),o=d("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),n=d("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),i=({connectionStatus:e})=>u.jsxs("div",{style:{background:"rgba(29, 38, 53, 0.95)",borderBottom:"2px solid #be202e",padding:"16px 24px",display:"flex",justifyContent:"space-between",alignItems:"center",backdropFilter:"blur(10px)"},children:[u.jsxs("div",{children:[u.jsxs("h1",{style:{margin:0,fontSize:"24px",fontWeight:700,color:"#ffffff",display:"flex",alignItems:"center",gap:"12px"},children:[u.jsx("span",{style:{fontSize:"28px"},children:"ðŸŽ¨"}),"Controller Studio"]}),u.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"13px",color:"#b8b8b8"},children:"Real-time 3D object positioning and configuration"})]}),u.jsx("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:u.jsxs("div",{style:{padding:"8px 16px",borderRadius:"20px",background:"connected"===e?"rgba(32, 151, 113, 0.2)":"rgba(190, 32, 46, 0.2)",border:"1px solid "+("connected"===e?"#209771":"#be202e"),display:"flex",alignItems:"center",gap:"8px",fontSize:"13px",fontWeight:600},children:[u.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"connected"===e?"#209771":"#be202e",boxShadow:"0 0 8px "+("connected"===e?"#209771":"#be202e")}}),"connected"===e?"Main App Connected":"Main App Disconnected"]})})]}),a={type:"change"},s={type:"start"},r={type:"end"},U=new T,B=new O,V=Math.cos(70*P.DEG2RAD);
/**
     * @license lucide-react v0.300.0 - ISC
     *
     * This source code is licensed under the ISC license.
     * See the LICENSE file in the root directory of this source tree.
     */class q extends y{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new v,this.cursor=new v,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:j.ROTATE,MIDDLE:j.DOLLY,RIGHT:j.PAN},this.touches={ONE:w.ROTATE,TWO:w.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return c.phi},this.getAzimuthalAngle=function(){return c.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(e){e.addEventListener("keydown",se),this._domElementKeyEvents=e},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",se),this._domElementKeyEvents=null},this.saveState=function(){o.target0.copy(o.target),o.position0.copy(o.object.position),o.zoom0=o.object.zoom},this.reset=function(){o.target.copy(o.target0),o.object.position.copy(o.position0),o.object.zoom=o.zoom0,o.object.updateProjectionMatrix(),o.dispatchEvent(a),o.update(),i=n.NONE},this.update=function(){const t=new v,s=(new S).setFromUnitVectors(e.up,new v(0,1,0)),r=s.clone().invert(),m=new v,g=new S,f=new v,h=2*Math.PI;return function(b=null){const x=o.object.position;t.copy(x).sub(o.target),t.applyQuaternion(s),c.setFromVector3(t),o.autoRotate&&i===n.NONE&&A(function(e){return null!==e?2*Math.PI/60*o.autoRotateSpeed*e:2*Math.PI/60/60*o.autoRotateSpeed}(b)),o.enableDamping?(c.theta+=p.theta*o.dampingFactor,c.phi+=p.phi*o.dampingFactor):(c.theta+=p.theta,c.phi+=p.phi);let y=o.minAzimuthAngle,j=o.maxAzimuthAngle;isFinite(y)&&isFinite(j)&&(y<-Math.PI?y+=h:y>Math.PI&&(y-=h),j<-Math.PI?j+=h:j>Math.PI&&(j-=h),c.theta=y<=j?Math.max(y,Math.min(j,c.theta)):c.theta>(y+j)/2?Math.max(y,c.theta):Math.min(j,c.theta)),c.phi=Math.max(o.minPolarAngle,Math.min(o.maxPolarAngle,c.phi)),c.makeSafe(),!0===o.enableDamping?o.target.addScaledVector(u,o.dampingFactor):o.target.add(u),o.target.sub(o.cursor),o.target.clampLength(o.minTargetRadius,o.maxTargetRadius),o.target.add(o.cursor),o.zoomToCursor&&C||o.object.isOrthographicCamera?c.radius=K(c.radius):c.radius=K(c.radius*d),t.setFromSpherical(c),t.applyQuaternion(r),x.copy(o.target).add(t),o.object.lookAt(o.target),!0===o.enableDamping?(p.theta*=1-o.dampingFactor,p.phi*=1-o.dampingFactor,u.multiplyScalar(1-o.dampingFactor)):(p.set(0,0,0),u.set(0,0,0));let w=!1;if(o.zoomToCursor&&C){let n=null;if(o.object.isPerspectiveCamera){const e=t.length();n=K(e*d);const i=e-n;o.object.position.addScaledVector(P,i),o.object.updateMatrixWorld()}else if(o.object.isOrthographicCamera){const e=new v(D.x,D.y,0);e.unproject(o.object),o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom/d)),o.object.updateProjectionMatrix(),w=!0;const i=new v(D.x,D.y,0);i.unproject(o.object),o.object.position.sub(i).add(e),o.object.updateMatrixWorld(),n=t.length()}else o.zoomToCursor=!1;null!==n&&(this.screenSpacePanning?o.target.set(0,0,-1).transformDirection(o.object.matrix).multiplyScalar(n).add(o.object.position):(U.origin.copy(o.object.position),U.direction.set(0,0,-1).transformDirection(o.object.matrix),Math.abs(o.object.up.dot(U.direction))<V?e.lookAt(o.target):(B.setFromNormalAndCoplanarPoint(o.object.up,o.target),U.intersectPlane(B,o.target))))}else o.object.isOrthographicCamera&&(o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom/d)),o.object.updateProjectionMatrix(),w=!0);return d=1,C=!1,!!(w||m.distanceToSquared(o.object.position)>l||8*(1-g.dot(o.object.quaternion))>l||f.distanceToSquared(o.target)>0)&&(o.dispatchEvent(a),m.copy(o.object.position),g.copy(o.object.quaternion),f.copy(o.target),!0)}}(),this.dispose=function(){o.domElement.removeEventListener("contextmenu",re),o.domElement.removeEventListener("pointerdown",te),o.domElement.removeEventListener("pointercancel",ne),o.domElement.removeEventListener("wheel",ie),o.domElement.removeEventListener("pointermove",oe),o.domElement.removeEventListener("pointerup",ne),null!==o._domElementKeyEvents&&(o._domElementKeyEvents.removeEventListener("keydown",se),o._domElementKeyEvents=null)};const o=this,n={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let i=n.NONE;const l=1e-6,c=new k,p=new k;let d=1;const u=new v,m=new E,g=new E,f=new E,h=new E,b=new E,x=new E,y=new E,T=new E,O=new E,P=new v,D=new E;let C=!1;const R=[],L={};let z=!1;function M(e){const t=Math.abs(.01*e);return Math.pow(.95,o.zoomSpeed*t)}function A(e){p.theta-=e}function I(e){p.phi-=e}const Y=function(){const e=new v;return function(t,o){e.setFromMatrixColumn(o,0),e.multiplyScalar(-t),u.add(e)}}(),N=function(){const e=new v;return function(t,n){!0===o.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(o.object.up,e)),e.multiplyScalar(t),u.add(e)}}(),H=function(){const e=new v;return function(t,n){const i=o.domElement;if(o.object.isPerspectiveCamera){const a=o.object.position;e.copy(a).sub(o.target);let s=e.length();s*=Math.tan(o.object.fov/2*Math.PI/180),Y(2*t*s/i.clientHeight,o.object.matrix),N(2*n*s/i.clientHeight,o.object.matrix)}else o.object.isOrthographicCamera?(Y(t*(o.object.right-o.object.left)/o.object.zoom/i.clientWidth,o.object.matrix),N(n*(o.object.top-o.object.bottom)/o.object.zoom/i.clientHeight,o.object.matrix)):o.enablePan=!1}}();function Z(e){o.object.isPerspectiveCamera||o.object.isOrthographicCamera?d/=e:o.enableZoom=!1}function _(e){o.object.isPerspectiveCamera||o.object.isOrthographicCamera?d*=e:o.enableZoom=!1}function F(e,t){if(!o.zoomToCursor)return;C=!0;const n=o.domElement.getBoundingClientRect(),i=e-n.left,a=t-n.top,s=n.width,r=n.height;D.x=i/s*2-1,D.y=-a/r*2+1,P.set(D.x,D.y,1).unproject(o.object).sub(o.object.position).normalize()}function K(e){return Math.max(o.minDistance,Math.min(o.maxDistance,e))}function X(e){m.set(e.clientX,e.clientY)}function W(e){h.set(e.clientX,e.clientY)}function q(e){if(1===R.length)m.set(e.pageX,e.pageY);else{const t=ce(e),o=.5*(e.pageX+t.x),n=.5*(e.pageY+t.y);m.set(o,n)}}function G(e){if(1===R.length)h.set(e.pageX,e.pageY);else{const t=ce(e),o=.5*(e.pageX+t.x),n=.5*(e.pageY+t.y);h.set(o,n)}}function Q(e){const t=ce(e),o=e.pageX-t.x,n=e.pageY-t.y,i=Math.sqrt(o*o+n*n);y.set(0,i)}function J(e){if(1==R.length)g.set(e.pageX,e.pageY);else{const t=ce(e),o=.5*(e.pageX+t.x),n=.5*(e.pageY+t.y);g.set(o,n)}f.subVectors(g,m).multiplyScalar(o.rotateSpeed);const t=o.domElement;A(2*Math.PI*f.x/t.clientHeight),I(2*Math.PI*f.y/t.clientHeight),m.copy(g)}function $(e){if(1===R.length)b.set(e.pageX,e.pageY);else{const t=ce(e),o=.5*(e.pageX+t.x),n=.5*(e.pageY+t.y);b.set(o,n)}x.subVectors(b,h).multiplyScalar(o.panSpeed),H(x.x,x.y),h.copy(b)}function ee(e){const t=ce(e),n=e.pageX-t.x,i=e.pageY-t.y,a=Math.sqrt(n*n+i*i);T.set(0,a),O.set(0,Math.pow(T.y/y.y,o.zoomSpeed)),Z(O.y),y.copy(T),F(.5*(e.pageX+t.x),.5*(e.pageY+t.y))}function te(e){!1!==o.enabled&&(0===R.length&&(o.domElement.setPointerCapture(e.pointerId),o.domElement.addEventListener("pointermove",oe),o.domElement.addEventListener("pointerup",ne)),function(e){R.push(e.pointerId)}(e),"touch"===e.pointerType?function(e){switch(le(e),R.length){case 1:switch(o.touches.ONE){case w.ROTATE:if(!1===o.enableRotate)return;q(e),i=n.TOUCH_ROTATE;break;case w.PAN:if(!1===o.enablePan)return;G(e),i=n.TOUCH_PAN;break;default:i=n.NONE}break;case 2:switch(o.touches.TWO){case w.DOLLY_PAN:if(!1===o.enableZoom&&!1===o.enablePan)return;!function(e){o.enableZoom&&Q(e),o.enablePan&&G(e)}(e),i=n.TOUCH_DOLLY_PAN;break;case w.DOLLY_ROTATE:if(!1===o.enableZoom&&!1===o.enableRotate)return;!function(e){o.enableZoom&&Q(e),o.enableRotate&&q(e)}(e),i=n.TOUCH_DOLLY_ROTATE;break;default:i=n.NONE}break;default:i=n.NONE}i!==n.NONE&&o.dispatchEvent(s)}(e):function(e){let t;switch(e.button){case 0:t=o.mouseButtons.LEFT;break;case 1:t=o.mouseButtons.MIDDLE;break;case 2:t=o.mouseButtons.RIGHT;break;default:t=-1}switch(t){case j.DOLLY:if(!1===o.enableZoom)return;!function(e){F(e.clientX,e.clientX),y.set(e.clientX,e.clientY)}(e),i=n.DOLLY;break;case j.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===o.enablePan)return;W(e),i=n.PAN}else{if(!1===o.enableRotate)return;X(e),i=n.ROTATE}break;case j.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===o.enableRotate)return;X(e),i=n.ROTATE}else{if(!1===o.enablePan)return;W(e),i=n.PAN}break;default:i=n.NONE}i!==n.NONE&&o.dispatchEvent(s)}(e))}function oe(e){!1!==o.enabled&&("touch"===e.pointerType?function(e){switch(le(e),i){case n.TOUCH_ROTATE:if(!1===o.enableRotate)return;J(e),o.update();break;case n.TOUCH_PAN:if(!1===o.enablePan)return;$(e),o.update();break;case n.TOUCH_DOLLY_PAN:if(!1===o.enableZoom&&!1===o.enablePan)return;!function(e){o.enableZoom&&ee(e),o.enablePan&&$(e)}(e),o.update();break;case n.TOUCH_DOLLY_ROTATE:if(!1===o.enableZoom&&!1===o.enableRotate)return;!function(e){o.enableZoom&&ee(e),o.enableRotate&&J(e)}(e),o.update();break;default:i=n.NONE}}(e):function(e){switch(i){case n.ROTATE:if(!1===o.enableRotate)return;!function(e){g.set(e.clientX,e.clientY),f.subVectors(g,m).multiplyScalar(o.rotateSpeed);const t=o.domElement;A(2*Math.PI*f.x/t.clientHeight),I(2*Math.PI*f.y/t.clientHeight),m.copy(g),o.update()}(e);break;case n.DOLLY:if(!1===o.enableZoom)return;!function(e){T.set(e.clientX,e.clientY),O.subVectors(T,y),O.y>0?Z(M(O.y)):O.y<0&&_(M(O.y)),y.copy(T),o.update()}(e);break;case n.PAN:if(!1===o.enablePan)return;!function(e){b.set(e.clientX,e.clientY),x.subVectors(b,h).multiplyScalar(o.panSpeed),H(x.x,x.y),h.copy(b),o.update()}(e)}}(e))}function ne(e){!function(e){delete L[e.pointerId];for(let t=0;t<R.length;t++)if(R[t]==e.pointerId)return void R.splice(t,1)}(e),0===R.length&&(o.domElement.releasePointerCapture(e.pointerId),o.domElement.removeEventListener("pointermove",oe),o.domElement.removeEventListener("pointerup",ne)),o.dispatchEvent(r),i=n.NONE}function ie(e){!1!==o.enabled&&!1!==o.enableZoom&&i===n.NONE&&(e.preventDefault(),o.dispatchEvent(s),function(e){F(e.clientX,e.clientY),e.deltaY<0?_(M(e.deltaY)):e.deltaY>0&&Z(M(e.deltaY)),o.update()}(function(e){const t=e.deltaMode,o={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:o.deltaY*=16;break;case 2:o.deltaY*=100}return e.ctrlKey&&!z&&(o.deltaY*=10),o}(e)),o.dispatchEvent(r))}function ae(e){"Control"===e.key&&(z=!1,document.removeEventListener("keyup",ae,{passive:!0,capture:!0}))}function se(e){!1!==o.enabled&&!1!==o.enablePan&&function(e){let t=!1;switch(e.code){case o.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?I(2*Math.PI*o.rotateSpeed/o.domElement.clientHeight):H(0,o.keyPanSpeed),t=!0;break;case o.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?I(-2*Math.PI*o.rotateSpeed/o.domElement.clientHeight):H(0,-o.keyPanSpeed),t=!0;break;case o.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?A(2*Math.PI*o.rotateSpeed/o.domElement.clientHeight):H(o.keyPanSpeed,0),t=!0;break;case o.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?A(-2*Math.PI*o.rotateSpeed/o.domElement.clientHeight):H(-o.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),o.update())}(e)}function re(e){!1!==o.enabled&&e.preventDefault()}function le(e){let t=L[e.pointerId];void 0===t&&(t=new E,L[e.pointerId]=t),t.set(e.pageX,e.pageY)}function ce(e){const t=e.pointerId===R[0]?R[1]:R[0];return L[t]}o.domElement.addEventListener("contextmenu",re),o.domElement.addEventListener("pointerdown",te),o.domElement.addEventListener("pointercancel",ne),o.domElement.addEventListener("wheel",ie,{passive:!1}),document.addEventListener("keydown",function(e){"Control"===e.key&&(z=!0,document.addEventListener("keyup",ae,{passive:!0,capture:!0}))},{passive:!0,capture:!0}),this.update()}}const G=({transforms:e,activeObject:t})=>{const o=b.useRef(null),n=b.useRef(null),i=b.useRef(null),a=b.useRef(null),s=b.useRef(null),r=b.useRef({});return b.useEffect(()=>{if(!o.current)return;const e=new D;e.background=new C(1910325),n.current=e;const t=new R(50,o.current.clientWidth/o.current.clientHeight,.1,1e3);t.position.set(15,10,15),a.current=t;const l=new L({antialias:!0});l.setSize(o.current.clientWidth,o.current.clientHeight),l.setPixelRatio(Math.min(window.devicePixelRatio,2)),o.current.appendChild(l.domElement),i.current=l;const c=new q(t,l.domElement);c.enableDamping=!0,c.dampingFactor=.05,c.target.set(0,0,0),s.current=c;const p=new z(16777215,.6);e.add(p);const d=new M(16777215,.8);d.position.set(10,10,5),e.add(d);const u=new M(16777215,.4);u.position.set(-10,5,-5),e.add(u);const f=new A(30,30,7105644,3815994);e.add(f);const h=new I(5);e.add(h);const b=new m,x=new g;x.setDecoderPath("/draco/"),b.setDRACOLoader(x);const y=new Y;e.add(y),r.current.truck=y,b.load("/model/Main_truck_updated_compressed.glb",e=>{const t=e.scene;let o;if(t.traverse(e=>{e instanceof N&&(e.name.toUpperCase().includes("LOGO")&&(o=e),e.material=new H({color:14737632,roughness:.7,metalness:.08}),e.castShadow=!0,e.receiveShadow=!0)}),y.add(t),o){r.current.logo&&y.remove(r.current.logo);const e=new Y,t=o.parent;t&&t.remove(o),e.add(o),y.add(e),r.current.logo=e}},void 0,e=>{const t=new Z(4,2,8),o=new H({color:14737632}),n=new N(t,o);y.add(n)});const v=new Y,j=new _(.3,.3,.5,16),w=new H({color:12460078,emissive:0,metalness:.3,roughness:.7}),k=new N(j,w);k.position.y=.25;const S=new _(.05,.05,1.3,8),E=new H({color:7105644,metalness:.8,roughness:.2}),T=new N(S,E);T.position.y=-.65,v.add(k),v.add(T),e.add(v),r.current.fuelSensor=v;const O=new Y,P=new F(6,3),U=new H({color:2135921,side:K,emissive:0,metalness:.1,roughness:.8}),B=new N(P,U),V=new Z(6.2,3.2,.1),G=new H({color:1910325,metalness:.5,roughness:.5}),Q=new N(V,G);Q.position.z=-.05,O.add(Q),O.add(B),e.add(O),r.current.telematicsDisplay=O;const J=new Y,$=new F(2,2),ee=(new X).load("/logo-front-truck.png"),te=new W({map:ee,transparent:!0,side:K}),oe=new N($,te);J.add(oe),y.add(J),r.current.logo=J;const ne=()=>{requestAnimationFrame(ne),c.update(),l.render(e,t)};ne();const ie=()=>{o.current&&(t.aspect=o.current.clientWidth/o.current.clientHeight,t.updateProjectionMatrix(),l.setSize(o.current.clientWidth,o.current.clientHeight))};return window.addEventListener("resize",ie),()=>{var e;window.removeEventListener("resize",ie),null==(e=o.current)||e.removeChild(l.domElement),l.dispose()}},[]),b.useEffect(()=>{const{truck:t,fuelSensor:o,telematicsDisplay:n,logo:i}=r.current;if(t&&(t.position.set(...e.truck.position),t.rotation.set(...e.truck.rotation),t.scale.set(...e.truck.scale)),o&&(o.position.set(...e.fuelSensor.position),o.rotation.set(...e.fuelSensor.rotation),o.scale.setScalar(e.fuelSensor.scale)),n){n.position.set(...e.telematicsDisplay.position),n.rotation.set(...e.telematicsDisplay.rotation);const t=n.children[1],o=n.children[0];t&&t.geometry&&(t.geometry.dispose(),t.geometry=new F(e.telematicsDisplay.size[0],e.telematicsDisplay.size[1])),o&&o.geometry&&(o.geometry.dispose(),o.geometry=new Z(e.telematicsDisplay.size[0]+.2,e.telematicsDisplay.size[1]+.2,.1))}if(i){i.position.set(...e.logo.position),i.rotation.set(...e.logo.rotation);const t=new v(0,0,e.logo.offsetZ);t.applyQuaternion(i.quaternion),i.position.add(t),i.scale.set(e.logo.scale[0],e.logo.scale[1],1),i.visible=e.logo.visible}},[e]),b.useEffect(()=>{const e=r.current;if(e.truck&&e.truck.traverse(e=>{e instanceof N&&e.material instanceof H&&e.material.emissive.setHex(0)}),"truck"===t&&e.truck&&e.truck.traverse(e=>{e instanceof N&&e.material instanceof H&&e.material.emissive.setHex(3355443)}),e.logo){const o=e.logo.children[0];o&&o.material instanceof W&&(o.material.opacity="logo"===t?1:.8)}},[t]),u.jsxs("div",{style:{position:"relative",background:"#1d2635",borderRadius:"12px",overflow:"hidden",boxShadow:"0 10px 40px rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)"},children:[u.jsx("div",{ref:o,style:{width:"100%",height:"100%"}}),u.jsx("div",{style:{position:"absolute",bottom:"16px",left:"16px",background:"rgba(0,0,0,0.7)",padding:"8px 12px",borderRadius:"6px",fontSize:"12px",color:"#b8b8b8",backdropFilter:"blur(10px)"},children:"ðŸ–±ï¸ Left: Rotate â€¢ Right: Pan â€¢ Scroll: Zoom"})]})},Q=({objectType:e,transform:t,onChange:o})=>{const n=(e,n)=>{const i=[...t.position];i[e]=n,o({position:i})},i=(e,n)=>{const i=[...t.rotation];i[e]=n*(Math.PI/180),o({rotation:i})},a=({label:e,value:t,onChange:o,min:n=-20,max:i=20,step:a=.01,unit:s="",decimals:r=2})=>u.jsxs("div",{style:{marginBottom:"16px"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[u.jsx("label",{style:{fontSize:"13px",fontWeight:600,color:"#ffffff"},children:e}),u.jsx("input",{type:"number",value:t.toFixed(r),onChange:e=>o(parseFloat(e.target.value)||0),step:a,style:{width:"80px",padding:"4px 8px",background:"rgba(32, 151, 113, 0.1)",border:"1px solid rgba(32, 151, 113, 0.3)",borderRadius:"4px",color:"#209771",fontSize:"13px",fontWeight:600,textAlign:"right",outline:"none"}})]}),u.jsx("input",{type:"range",min:n,max:i,step:a,value:t,onChange:e=>o(parseFloat(e.target.value)),style:{width:"100%",height:"6px",borderRadius:"3px",background:"linear-gradient(to right, #be202e 0%, #be202e "+(t-n)/(i-n)*100+"%, #3a3a3a "+(t-n)/(i-n)*100+"%, #3a3a3a 100%)",outline:"none",cursor:"pointer"}})]});return u.jsxs("div",{children:[u.jsxs("div",{style:{marginBottom:"24px",padding:"16px",background:"rgba(32, 151, 113, 0.1)",borderRadius:"8px",border:"1px solid rgba(32, 151, 113, 0.3)"},children:[u.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"14px",fontWeight:700,color:"#209771",textTransform:"uppercase",letterSpacing:"0.5px"},children:"ðŸ“ Position"}),u.jsx(a,{label:"X (Left/Right)",value:t.position[0],onChange:e=>n(0,e),step:.01,decimals:2}),u.jsx(a,{label:"Y (Up/Down)",value:t.position[1],onChange:e=>n(1,e),step:.01,decimals:2}),u.jsx(a,{label:"Z (Forward/Back)",value:t.position[2],onChange:e=>n(2,e),step:.01,decimals:2})]}),u.jsxs("div",{style:{marginBottom:"24px",padding:"16px",background:"rgba(190, 32, 46, 0.1)",borderRadius:"8px",border:"1px solid rgba(190, 32, 46, 0.3)"},children:[u.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"14px",fontWeight:700,color:"#be202e",textTransform:"uppercase",letterSpacing:"0.5px"},children:"ðŸ”„ Rotation"}),u.jsx(a,{label:"X (Pitch)",value:t.rotation[0]*(180/Math.PI),onChange:e=>i(0,e),min:-180,max:180,step:1,unit:"Â°"}),u.jsx(a,{label:"Y (Yaw)",value:t.rotation[1]*(180/Math.PI),onChange:e=>i(1,e),min:-180,max:180,step:1,unit:"Â°"}),u.jsx(a,{label:"Z (Roll)",value:t.rotation[2]*(180/Math.PI),onChange:e=>i(2,e),min:-180,max:180,step:1,unit:"Â°"})]}),"truck"===e&&u.jsxs("div",{style:{padding:"16px",background:"rgba(108, 108, 108, 0.1)",borderRadius:"8px",border:"1px solid rgba(108, 108, 108, 0.3)"},children:[u.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"14px",fontWeight:700,color:"#6c6c6c",textTransform:"uppercase",letterSpacing:"0.5px"},children:"ðŸ“ Scale"}),u.jsx(a,{label:"Uniform Scale",value:t.scale[0],onChange:e=>o({scale:[e,e,e]}),min:.1,max:3,step:.1})]}),"telematicsDisplay"===e&&u.jsxs("div",{style:{padding:"16px",background:"rgba(108, 108, 108, 0.1)",borderRadius:"8px",border:"1px solid rgba(108, 108, 108, 0.3)"},children:[u.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"14px",fontWeight:700,color:"#6c6c6c",textTransform:"uppercase",letterSpacing:"0.5px"},children:"ðŸ“ Size"}),u.jsx(a,{label:"Width",value:t.size[0],onChange:e=>o({size:[e,t.size[1]]}),min:1,max:15,step:.5}),u.jsx(a,{label:"Height",value:t.size[1],onChange:e=>o({size:[t.size[0],e]}),min:1,max:10,step:.5})]}),"fuelSensor"===e&&u.jsxs("div",{style:{padding:"16px",background:"rgba(108, 108, 108, 0.1)",borderRadius:"8px",border:"1px solid rgba(108, 108, 108, 0.3)"},children:[u.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"14px",fontWeight:700,color:"#6c6c6c",textTransform:"uppercase",letterSpacing:"0.5px"},children:"âš™ï¸ Properties"}),u.jsx(a,{label:"Scale",value:t.scale,onChange:e=>o({scale:e}),min:.1,max:3,step:.1}),u.jsx(a,{label:"Probe Length",value:t.probeLength,onChange:e=>o({probeLength:e}),min:.1,max:3,step:.1})]}),"logo"===e&&u.jsxs("div",{style:{padding:"16px",background:"rgba(108, 108, 108, 0.1)",borderRadius:"8px",border:"1px solid rgba(108, 108, 108, 0.3)"},children:[u.jsx("h3",{style:{margin:"0 0 16px 0",fontSize:"14px",fontWeight:700,color:"#6c6c6c",textTransform:"uppercase",letterSpacing:"0.5px"},children:"âš™ï¸ Properties"}),u.jsx(a,{label:"Scale X",value:t.scale[0],onChange:e=>o({scale:[e,t.scale[1]]}),min:.1,max:3,step:.1}),u.jsx(a,{label:"Scale Y",value:t.scale[1],onChange:e=>o({scale:[t.scale[0],e]}),min:.1,max:3,step:.1}),u.jsx(a,{label:"Offset Z",value:t.offsetZ,onChange:e=>o({offsetZ:e}),min:-5,max:5,step:.01,decimals:2}),u.jsx("div",{style:{marginTop:"16px"},children:u.jsx("button",{onClick:()=>o({visible:!t.visible}),style:{width:"100%",padding:"12px",background:t.visible?"#209771":"#be202e",color:"#ffffff",border:"none",borderRadius:"6px",fontSize:"13px",fontWeight:600,cursor:"pointer"},children:t.visible?"ðŸ‘ï¸ Visible":"ðŸš« Hidden"})})]})]})},J=({activeObject:i,onActiveObjectChange:a,transforms:s,onTransformChange:r,onExport:l,onImport:c,onReset:d})=>{const[m,g]=b.useState(!1),[f,h]=b.useState(!1);return u.jsxs("div",{style:{display:"flex",flexDirection:"column",background:"rgba(29, 38, 53, 0.95)",borderRadius:"12px",overflow:"hidden",boxShadow:"0 10px 40px rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)"},children:[u.jsxs("div",{style:{padding:"16px",borderBottom:"1px solid rgba(255,255,255,0.1)",display:"flex",gap:"8px"},children:[u.jsxs("button",{onClick:()=>p(e,null,function*(){(yield c())&&(h(!0),setTimeout(()=>h(!1),2e3))}),style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"10px",background:f?"#209771":"#6c6c6c",color:"#ffffff",border:"none",borderRadius:"6px",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[f?u.jsx(t,{size:16}):u.jsx(n,{size:16}),f?"LOADED":"IMPORT"]}),u.jsxs("button",{onClick:()=>p(e,null,function*(){(yield l())&&(g(!0),setTimeout(()=>g(!1),2e3))}),style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",padding:"10px",background:m?"#209771":"#be202e",color:"#ffffff",border:"none",borderRadius:"6px",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:[m?u.jsx(t,{size:16}):u.jsx(o,{size:16}),m?"COPIED":"EXPORT"]})]}),u.jsx("div",{style:{display:"flex",borderBottom:"2px solid rgba(255,255,255,0.1)",background:"rgba(0,0,0,0.2)"},children:[{key:"telematicsDisplay",label:"Display",icon:"ðŸ“º"},{key:"fuelSensor",label:"Fuel",icon:"â›½"},{key:"truck",label:"Truck",icon:"ðŸš›"},{key:"logo",label:"Logo",icon:"ðŸ·ï¸"}].map(e=>u.jsxs("button",{onClick:()=>a(e.key),style:{flex:1,padding:"12px 8px",background:i===e.key?"rgba(190, 32, 46, 0.2)":"transparent",border:"none",borderBottom:i===e.key?"2px solid #be202e":"2px solid transparent",color:i===e.key?"#ffffff":"#b8b8b8",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s",display:"flex",flexDirection:"column",alignItems:"center",gap:"4px"},children:[u.jsx("span",{style:{fontSize:"20px"},children:e.icon}),e.label]},e.key))}),u.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"16px"},children:[u.jsx(Q,{objectType:i,transform:s[i],onChange:e=>r(i,e)}),u.jsx("button",{onClick:()=>d(i),style:{width:"100%",padding:"12px",marginTop:"16px",background:"rgba(190, 32, 46, 0.2)",border:"1px solid #be202e",borderRadius:"6px",color:"#be202e",fontSize:"13px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},children:"ðŸ”„ Reset to Default"})]})]})},$="truck-config",ee="fuel-sensor-config",te="telematics-display-config",oe="logo-config",ne=()=>{const[t,o]=b.useState("telematicsDisplay"),{transforms:n,updateTransform:a,exportConfig:s,importConfig:r,resetToDefault:d,connectionStatus:m}=(()=>{const[t,o]=b.useState({truck:{position:f.truck.position,rotation:f.truck.rotation,scale:f.truck.scale},fuelSensor:{position:f.fuelSensor.position,rotation:f.fuelSensor.rotation,scale:f.fuelSensor.scale,probeLength:f.fuelSensor.probeLength},telematicsDisplay:{position:f.telematicsDisplay.position,rotation:f.telematicsDisplay.rotation,size:f.telematicsDisplay.size},logo:{position:f.logo.position,rotation:f.logo.rotation,scale:f.logo.scale,offsetZ:f.logo.offsetZ,visible:f.logo.visible}}),[n,i]=b.useState("disconnected");b.useEffect(()=>{p(e,null,function*(){try{const e=yield fetch("/src/config/objectTransforms.json?t="+Date.now()),t=yield e.json();o({truck:{position:t.truck.position,rotation:t.truck.rotation,scale:t.truck.scale},fuelSensor:{position:t.fuelSensor.position,rotation:t.fuelSensor.rotation,scale:t.fuelSensor.scale,probeLength:t.fuelSensor.probeLength},telematicsDisplay:{position:t.telematicsDisplay.position,rotation:t.telematicsDisplay.rotation,size:t.telematicsDisplay.size},logo:{position:t.logo.position,rotation:t.logo.rotation,scale:t.logo.scale,offsetZ:t.logo.offsetZ,visible:t.logo.visible}})}catch(e){}})},[]),b.useEffect(()=>{const e=()=>{const e=localStorage.getItem("last-main-page-update");if(e){const t=Date.now()-parseInt(e);i(t<5e3?"connected":"disconnected")}};e();const t=setInterval(e,2e3);return()=>clearInterval(t)},[]);const a=b.useCallback((e,t)=>{localStorage.setItem(e,JSON.stringify(t)),localStorage.setItem("controller-update-timestamp",Date.now().toString()),window.dispatchEvent(new StorageEvent("storage",{key:e,newValue:JSON.stringify(t),url:window.location.href}))},[]),s=b.useCallback((e,t)=>{o(o=>{const n=c(l({},o),{[e]:l(l({},o[e]),t)});return a({truck:$,fuelSensor:ee,telematicsDisplay:te,logo:oe}[e],n[e]),n})},[a]),r=b.useCallback(()=>p(e,null,function*(){try{const e={telematicsDisplay:t.telematicsDisplay,fuelSensor:t.fuelSensor,truck:t.truck,logo:t.logo},o=JSON.stringify(e,null,2);return yield navigator.clipboard.writeText(o),!0}catch(e){return!1}}),[t]),d=b.useCallback(()=>p(e,null,function*(){try{const e=yield fetch("/src/config/objectTransforms.json?t="+Date.now()),t=yield e.json();return o({truck:{position:t.truck.position,rotation:t.truck.rotation,scale:t.truck.scale},fuelSensor:{position:t.fuelSensor.position,rotation:t.fuelSensor.rotation,scale:t.fuelSensor.scale,probeLength:t.fuelSensor.probeLength},telematicsDisplay:{position:t.telematicsDisplay.position,rotation:t.telematicsDisplay.rotation,size:t.telematicsDisplay.size},logo:{position:t.logo.position,rotation:t.logo.rotation,scale:t.logo.scale,offsetZ:t.logo.offsetZ,visible:t.logo.visible}}),!0}catch(e){return!1}}),[]),u=b.useCallback(t=>p(e,null,function*(){try{const e=yield fetch("/src/config/objectTransforms.json?t="+Date.now()),n=yield e.json(),i={truck:{position:[...n.truck.position],rotation:[...n.truck.rotation],scale:[...n.truck.scale]},fuelSensor:{position:[...n.fuelSensor.position],rotation:[...n.fuelSensor.rotation],scale:n.fuelSensor.scale,probeLength:n.fuelSensor.probeLength},telematicsDisplay:{position:[...n.telematicsDisplay.position],rotation:[...n.telematicsDisplay.rotation],size:[...n.telematicsDisplay.size]},logo:{position:[...n.logo.position],rotation:[...n.logo.rotation],scale:[...n.logo.scale],offsetZ:n.logo.offsetZ,visible:n.logo.visible}};o(e=>c(l({},e),{[t]:l({},i[t])})),a({truck:$,fuelSensor:ee,telematicsDisplay:te,logo:oe}[t],i[t])}catch(e){alert("Reset failed. Check console for details.")}}),[a]);return{transforms:t,updateTransform:s,exportConfig:r,importConfig:d,resetToDefault:u,connectionStatus:n}})();return u.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh",background:"linear-gradient(135deg, #0f1419 0%, #1d2635 100%)",fontFamily:"Inter, sans-serif",color:"#ffffff"},children:[u.jsx(i,{connectionStatus:m}),u.jsxs("div",{style:{flex:1,display:"grid",gridTemplateColumns:"1fr 400px",gap:"20px",padding:"20px",overflow:"hidden"},children:[u.jsx(G,{transforms:n,activeObject:t}),u.jsx(J,{activeObject:t,onActiveObjectChange:o,transforms:n,onTransformChange:a,onExport:s,onImport:r,onReset:d})]})]})},ie=document.getElementById("root");ie&&h.createRoot(ie).render(u.jsx(x.StrictMode,{children:u.jsx(ne,{})}))}},function(){return B||(0,U[n(U)[0]])((B={exports:{}}).exports,B),B.exports});export default V();
