var e=Object.defineProperty,t=(t,n,s)=>((t,n,s)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s)(t,"symbol"!=typeof n?n+"":n,s),n=(e,t,n)=>new Promise((s,i)=>{var a=e=>{try{o(n.next(e))}catch(t){i(t)}},r=e=>{try{o(n.throw(e))}catch(t){i(t)}},o=e=>e.done?s(e.value):Promise.resolve(e.value).then(a,r);o((n=n.apply(e,t)).next())});import{c as s,D as i,G as a,j as r,o,a as c}from"./objectTransforms-DsFktLSo.js";import{r as l,R as d}from"./react-vendor-DtX1tuCI.js";import{G as u,S as h,E as f,M as m,a as p,L as g,b as x,c as w,C as v,P as y,d as T,D as b,T as N,e as S,f as j,V as R,g as k,B as E,h as M,i as G,j as A,k as P,l as C,m as I,F as L,n as V,W as B,o as O,A as z,p as D,R as W,q as F,Q as q}from"./three-BynlRSA_.js";
/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=s("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),$=s("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),U=s("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]),Q=s("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),K=s("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]),Y=s("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),J=s("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),X=s("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),_=({scene:e,truckGroup:t,position:n=[3.1,.6,-5],rotation:s=[0,0,0],scale:i=1,probeLength:a=1.3,onComponentsCreated:r})=>{const o=l.useRef(null),c=l.useRef(null),d=l.useRef(null),R=l.useRef(null),k=l.useRef(!1);return l.useEffect(()=>{if(!e||!t)return;if(k.current)return;k.current=!0;const s=new u;s.position.set(...n),t.add(s),o.current=s;const i=new u;i.position.set(0,.7,0),s.add(i),c.current=i;const a=new h,l=.15,E=.15;a.moveTo(-.12,-E),a.lineTo(.12,-E),a.lineTo(l,-.12),a.lineTo(l,.12),a.lineTo(.12,E),a.lineTo(-.12,E),a.lineTo(-l,.12),a.lineTo(-l,-.12),a.closePath();const M=new f(a,{depth:.1,bevelEnabled:!0,bevelThickness:.008,bevelSize:.008,bevelSegments:2}),G=new m(M,new p({color:2763306,roughness:.3,metalness:.8}));G.rotation.x=Math.PI/2,G.castShadow=!0,G.receiveShadow=!0,i.add(G);const A=new g(new x(M,20),new w({color:11579568,transparent:!0,opacity:.6}));A.rotation.x=Math.PI/2,i.add(A);const P=new v(.05,.06,.04,16),C=new m(P,new p({color:15263976,roughness:.7,metalness:.3}));C.position.y=-.02,C.castShadow=!0,C.receiveShadow=!0,i.add(C);const I=new m(new y(.24,.06),new T({transparent:!0,opacity:.9,depthWrite:!1,side:b}));I.rotation.x=-Math.PI/2,I.rotation.z=Math.PI/2,I.position.y=.013,i.add(I);(new N).load("/Logo-white.png",e=>{e.colorSpace=S,e.needsUpdate=!0,I.material.map=e,I.material.needsUpdate=!0});const L=new u;s.add(L);const V=new v(.045,.045,1.3,20),B=new m(V,new p({color:16777215,roughness:.3,metalness:.7}));B.position.set(0,.05,0),B.castShadow=!0,B.receiveShadow=!0,L.add(B),d.current=B;const O=new u;O.position.set(0,-.5,0),L.add(O),R.current=O;const z=new m(new v(.055,.055,.25,12),new p({color:2278750,transparent:!0,opacity:.8,roughness:.6,metalness:.2}));z.castShadow=!0,z.receiveShadow=!0,O.add(z);for(let e=0;e<4;e++){const t=new m(new j(.055,.006,8,16),new p({color:1483594,roughness:.4,metalness:.3}));t.position.y=.06*e-.08,t.rotation.x=Math.PI/2,t.castShadow=!0,t.receiveShadow=!0,O.add(t)}return r&&r({sensorHeadGroup:i,probeTube:B,cageGroup:O,tankGroup:s}),()=>{o.current&&(t.remove(o.current),o.current.traverse(e=>{var t,n;e instanceof m&&(null==(t=e.geometry)||t.dispose(),Array.isArray(e.material)?e.material.forEach(e=>e.dispose()):null==(n=e.material)||n.dispose())})),k.current=!1}},[e,t]),null},Z=({scene:e,truckGroup:t,modelPath:n="/model/Main_truck_updated_compressed.glb",position:s=[1.1,-1.1,-5.3],rotation:r=[0,Math.PI,0],scale:o=1.5,lightGrayMaterial:c,edgeMaterial:d,onLoad:u,onProgress:h,onError:f,onLogoCreated:w})=>{const v=l.useRef(null),j=l.useRef([]),k=l.useRef(!1),E=l.useRef(null);return l.useEffect(()=>{if(!e||!t)return;if(k.current)return;k.current=!0;const l=new i;l.setDecoderPath("/draco/");const M=new a;return M.setDRACOLoader(l),M.load(n,e=>{const n=e.scene;n.rotation.set(...r),n.position.set(...s),n.scale.set(o,o,o);const i=[];n.traverse(e=>{e instanceof m&&i.push(e.name)});const a=[];n.traverse(e=>{if(e instanceof m){if(e.name.toLowerCase().includes("wheel")){e.geometry.computeBoundingBox();const t=e.geometry.boundingBox;if(t){const n=new R;t.getCenter(n),e.geometry.translate(-n.x,-n.y,-n.z),e.position.add(n),a.push(e)}}e.material&&(Array.isArray(e.material)?e.material.forEach(e=>e.dispose()):e.material.dispose()),function(e,t,n,s){const i=e.name.toLowerCase(),a=i.includes("wheel")||i.includes("tire")||i.includes("rim"),r=i.includes("logo"),o=i.includes("glass")||i.includes("window")||i.includes("windshield")||i.includes("windscreen"),c=i.includes("tank")||i.includes("fuel")||i.includes("cylinder");a?(e.material=new p({color:2763306,roughness:.9,metalness:.1}),e.castShadow=!0,e.receiveShadow=!0):r?function(e,t){e.material=new T({transparent:!0,opacity:0,side:b});(new N).load("/logo-front-truck.png",n=>{n.colorSpace=S,e.geometry.computeBoundingBox();const s=e.geometry.boundingBox;if(s){const i=s.max.x-s.min.x,a=s.max.y-s.min.y,r=new y(i,a),o=new T({map:n,transparent:!0,alphaTest:.1,side:b,toneMapped:!1}),c=new m(r,o);c.name="LogoPlane",c.position.copy(e.position),c.rotation.copy(e.rotation),c.quaternion.copy(e.quaternion);const l=new R(0,0,-.5);l.applyQuaternion(c.quaternion),c.position.add(l),e.parent&&e.parent.add(c),t&&t(c)}},void 0,e=>{}),e.castShadow=!1,e.receiveShadow=!1}(e,s):o?function(e){e.material=new p({color:13426175,transparent:!0,opacity:.25,side:b,depthWrite:!1,roughness:.1,metalness:.1,envMapIntensity:1}),e.castShadow=!1,e.receiveShadow=!0}(e):c?function(e){const t=new p({color:8421504,transparent:!0,opacity:.2,side:b,depthWrite:!1,roughness:.1,metalness:.2});e.material=t,e.castShadow=!1,e.receiveShadow=!0,e.traverse(n=>{if(n instanceof m&&n!==e){n.material&&(Array.isArray(n.material)?n.material.forEach(e=>e.dispose()):n.material.dispose());const e=n.name.toLowerCase().includes("sensor")||n.name.toLowerCase().includes("probe")||n.name.toLowerCase().includes("head");n.material=e?new p({color:12460078,transparent:!1,roughness:.3,metalness:.7}):t.clone(),n.castShadow=!1,n.receiveShadow=!1}})}(e):(e.material=t,e.castShadow=!0,e.receiveShadow=!0);const l=new x(e.geometry,15),d=new g(l,n);e.add(d)}(e,c,d,e=>{E.current=e,w&&w(e)})}}),j.current=a,a.length,v.current=n,t.add(n),u&&u(n,a)},e=>{if(h&&e.lengthComputable){const t=e.loaded/e.total*100;h(t)}},e=>{f&&f(e)}),()=>{v.current&&(t.remove(v.current),v.current.traverse(e=>{var t,n;e instanceof m&&(null==(t=e.geometry)||t.dispose(),Array.isArray(e.material)?e.material.forEach(e=>e.dispose()):null==(n=e.material)||n.dispose())})),l.dispose()}},[e,t,n]),null};
/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function ee(e){const{speed:t=85,fuelLevel:n=.65,batteryLevel:s=.75,temperature:i=18,time:a="12:45",ecoMode:r=!0,range:o=443}=e,c=document.createElement("canvas");c.width=2048,c.height=1024;const l=c.getContext("2d");if(!l)return new k(c);const d=l.createRadialGradient(1024,512,0,1024,512,1200);d.addColorStop(0,"#1d2635"),d.addColorStop(1,"#0f1419"),l.fillStyle=d,l.fillRect(0,0,2048,1024);const u=1024,h=550,f=400;l.strokeStyle="rgba(190, 32, 46, 0.15)",l.lineWidth=1;for(let g=100;g<1024;g+=80)l.beginPath(),l.moveTo(0,g),l.lineTo(2048,g),l.stroke();for(let g=100;g<2048;g+=80)l.beginPath(),l.moveTo(g,0),l.lineTo(g,1024),l.stroke();l.strokeStyle="rgba(190, 32, 46, 0.3)",l.lineWidth=2,l.beginPath(),l.arc(u,h,460,0,2*Math.PI),l.stroke(),l.strokeStyle="rgba(190, 32, 46, 0.15)",l.lineWidth=1,l.beginPath(),l.arc(u,h,480,0,2*Math.PI),l.stroke();const m=1.6*Math.PI/20,p=.7*Math.PI;for(let g=0;g<20;g++){const e=p+g*m;t/160>(g+1)/20-.05?(l.shadowColor="#be202e",l.shadowBlur=20,l.fillStyle="#be202e"):(l.shadowBlur=0,l.fillStyle="rgba(108, 108, 108, 0.3)"),l.beginPath(),l.arc(u,h,f,e,e+.9*m),l.arc(u,h,340,e+.9*m,e,!0),l.closePath(),l.fill()}l.shadowBlur=0,l.strokeStyle="#6c6c6c",l.lineWidth=2;for(let g=0;g<=8;g++){const e=p+g/8*(1.6*Math.PI),t=u+330*Math.cos(e),n=h+330*Math.sin(e),s=u+310*Math.cos(e),i=h+310*Math.sin(e);l.beginPath(),l.moveTo(t,n),l.lineTo(s,i),l.stroke(),l.font="24px Arial",l.fillStyle="#6c6c6c",l.textAlign="center";const a=u+280*Math.cos(e),r=h+280*Math.sin(e);l.fillText((20*g).toString(),a,r+8)}return l.shadowColor="#be202e",l.shadowBlur=40,l.font="bold 320px Arial",l.fillStyle="#ffffff",l.textAlign="center",l.fillText(Math.round(t).toString(),u,650),l.shadowBlur=0,l.font="bold 56px Arial",l.fillStyle="#be202e",l.fillText("KM/H",u,730),l.strokeStyle="rgba(190, 32, 46, 0.5)",l.lineWidth=3,te(l,u,h,280),l.strokeStyle="rgba(108, 108, 108, 0.3)",l.lineWidth=2,te(l,u,h,240),l.font="bold 28px Arial",l.fillStyle="#be202e",l.fillText("● LIVE TRACKING",u,270),l.font="32px Arial",l.fillStyle="#6c6c6c",l.fillText(`RANGE ${o} KM`,u,790),function(e,t,n,s,i){const a=140;e.strokeStyle="rgba(108, 108, 108, 0.3)",e.lineWidth=20,e.beginPath(),e.arc(t,n,a,0,2*Math.PI),e.stroke(),e.shadowColor="#be202e",e.shadowBlur=15,e.strokeStyle="#be202e",e.lineWidth=20,e.beginPath(),e.arc(t,n,a,-Math.PI/2,-Math.PI/2+i*Math.PI*2),e.stroke(),e.shadowBlur=0,e.font="bold 72px Arial",e.fillStyle="#ffffff",e.textAlign="center",e.fillText(Math.round(100*i)+"%",t,n+20),e.font="bold 28px Arial",e.fillStyle="#6c6c6c",e.fillText("FUEL LEVEL",t,n+60),e.strokeStyle="rgba(190, 32, 46, 0.6)",e.lineWidth=3;const r=30,o=a+40;e.beginPath(),e.moveTo(t-o,n-o+r),e.lineTo(t-o,n-o),e.lineTo(t-o+r,n-o),e.stroke(),e.beginPath(),e.moveTo(t+o-r,n-o),e.lineTo(t+o,n-o),e.lineTo(t+o,n-o+r),e.stroke(),e.beginPath(),e.moveTo(t-o,n+o-r),e.lineTo(t-o,n+o),e.lineTo(t-o+r,n+o),e.stroke(),e.beginPath(),e.moveTo(t+o-r,n+o),e.lineTo(t+o,n+o),e.lineTo(t+o,n+o-r),e.stroke(),e.font="20px monospace",e.fillStyle="#6c6c6c",e.textAlign="center",e.fillText("SENSOR: ACTIVE",t,n+200),e.fillText(`LITERS: ${Math.round(400*i)}L`,t,n+230)}(l,280,550,0,n),function(e,t,n){const s=280,i=320;e.strokeStyle="rgba(190, 32, 46, 0.4)",e.lineWidth=2,e.strokeRect(t-s/2,n-i/2,s,i),e.strokeStyle="rgba(108, 108, 108, 0.3)",e.lineWidth=1,e.strokeRect(t-s/2+10,n-i/2+10,s-20,i-20),e.font="bold 28px Arial",e.fillStyle="#be202e",e.textAlign="center",e.fillText("DIAGNOSTICS",t,n-120),e.strokeStyle="rgba(190, 32, 46, 0.5)",e.lineWidth=1,e.beginPath(),e.moveTo(t-120,n-90),e.lineTo(t+120,n-90),e.stroke(),e.font="22px monospace",e.textAlign="left",e.fillStyle="#6c6c6c",e.fillText("ENGINE",t-110,n-50),e.fillStyle="#be202e",e.fillText("● ONLINE",t+10,n-50),e.fillStyle="#6c6c6c",e.fillText("SENSOR",t-110,n-10),e.fillStyle="#be202e",e.fillText("● ACTIVE",t+10,n-10),e.fillStyle="#6c6c6c",e.fillText("GPS",t-110,n+30),e.fillStyle="#be202e",e.fillText("● LOCKED",t+10,n+30),e.fillStyle="#6c6c6c",e.fillText("TEMP",t-110,n+70),e.fillStyle="#ffffff",e.fillText("18°C",t+10,n+70),e.fillStyle="#6c6c6c",e.fillText("PRESSURE",t-110,n+110),e.fillStyle="#ffffff",e.fillText("2.4 BAR",t+10,n+110)}(l,1768,550),function(e,t,n,s){e.fillStyle="rgba(190, 32, 46, 0.1)",e.fillRect(0,0,2048,200),e.strokeStyle="rgba(190, 32, 46, 0.5)",e.lineWidth=2,e.beginPath(),e.moveTo(0,200),e.lineTo(2048,200),e.stroke(),e.textAlign="center",e.shadowColor="#be202e",e.shadowBlur=20,e.font="bold 56px Arial",e.fillStyle="#ffffff",e.fillText("TRANSLINK",t,90),e.shadowBlur=0,e.font="bold 36px Arial",e.fillStyle="#be202e",e.fillText("FUEL TELEMATICS SYSTEM",t,140),e.textAlign="left",e.font="bold 32px monospace",e.fillStyle="#6c6c6c",e.fillText("TIME",100,90),e.fillStyle="#ffffff",e.fillText(s,100,140),e.textAlign="right",e.font="bold 32px monospace",e.fillStyle="#6c6c6c",e.fillText("AMBIENT",1948,90),e.fillStyle="#ffffff",e.fillText(`${n}°C`,1948,140),e.strokeStyle="#be202e",e.lineWidth=3,e.beginPath(),e.moveTo(50,80),e.lineTo(50,50),e.lineTo(80,50),e.stroke(),e.beginPath(),e.moveTo(1998,80),e.lineTo(1998,50),e.lineTo(1968,50),e.stroke()}(l,u,i,a),new k(c)}function te(e,t,n,s){e.beginPath();for(let i=0;i<6;i++){const a=Math.PI/3*i-Math.PI/2,r=t+s*Math.cos(a),o=n+s*Math.sin(a);0===i?e.moveTo(r,o):e.lineTo(r,o)}e.closePath(),e.stroke()}const ne=({scene:e,truckGroup:t,position:n=[-7.6,9.8,5.3],rotation:s=[1.5707963267948966,-1.5707963267948966,0],size:i=[7.5,4],initialData:a={speed:85,fuelLevel:.65},onMaterialCreated:r,onMeshCreated:o,onGroupCreated:c})=>{const d=l.useRef(null),h=l.useRef(null);return l.useEffect(()=>{if(!e||!t)return;const l=new u;d.current=l;const f=ee(a),p=new T({map:f,transparent:!0,opacity:1,side:b});h.current=p;const g=new m(new y(i[0],i[1]),p);l.add(g),l.position.set(...n),l.rotation.set(...s),t.add(l);const x=new R;return l.getWorldPosition(x),r&&r(p),o&&o(g),c&&c(l),()=>{d.current&&(t.remove(d.current),d.current.traverse(e=>{var t,n;e instanceof m&&(null==(t=e.geometry)||t.dispose(),Array.isArray(e.material)?e.material.forEach(e=>e.dispose()):null==(n=e.material)||n.dispose())}))}},[e,t]),null};const se=({scene:e,count:t=400,color:n=12632256,size:s=.06,opacity:i=.4,spread:a=[60,20,300],sizeRange:r=[.02,.08],animationSpeed:o=160,resetDistance:c=100,onParticlesCreated:d})=>{const u=l.useRef(null);return l.useEffect(()=>{if(!e)return;const o=new E,c=new Float32Array(3*t),l=new Float32Array(t);for(let e=0;e<3*t;e+=3)c[e]=(Math.random()-.5)*a[0],c[e+1]=Math.random()*a[1],c[e+2]=(Math.random()-.5)*a[2],l[e/3]=Math.random()*(r[1]-r[0])+r[0];o.setAttribute("position",new M(c,3)),o.setAttribute("size",new M(l,1));const h=new G({color:n,size:s,transparent:!0,opacity:i,sizeAttenuation:!0}),f=new A(o,h);return u.current=f,e.add(f),d&&d(f),()=>{u.current&&(e.remove(u.current),u.current.geometry.dispose(),u.current.material instanceof P&&u.current.material.dispose())}},[e]),null};class ie{constructor(){t(this,"ctx",null),t(this,"masterGain",null),t(this,"engineRefs",{}),t(this,"engineRumbleGain",null),t(this,"windRefs",{}),t(this,"scannerNode",null),t(this,"scannerGain",null),t(this,"hornOsc1",null),t(this,"hornOsc2",null),t(this,"hornGain",null),t(this,"airBrakeBuffer",null),t(this,"airBrakeGain",null),t(this,"engineStartBuffer",null),t(this,"engineStartPlaying",!1),t(this,"engineRunBuffer",null),t(this,"engineRunSource",null),t(this,"engineRunGain",null),t(this,"initialized",!1)}init(){if(this.initialized)return;const e=window.AudioContext||window.webkitAudioContext;this.ctx=new e,this.masterGain=this.ctx.createGain(),this.masterGain.gain.value=0,this.masterGain.connect(this.ctx.destination),this.setupScanner(),this.setupHorn(),this.loadAirBrake(),this.loadEngineStart(),this.loadEngineRun(),this.initialized=!0}toggleMute(e){var t,n;if("closed"===(null==(t=this.ctx)?void 0:t.state)&&(this.initialized=!1,this.init()),this.initialized||this.init(),"suspended"===(null==(n=this.ctx)?void 0:n.state)&&this.ctx.resume().then(()=>{}),this.masterGain&&this.ctx){const t=this.ctx.currentTime,n=e?0:.25;this.masterGain.gain.setTargetAtTime(n,t,.3)}}createNoiseBuffer(e){if(!this.ctx)return null;const t=2*this.ctx.sampleRate,n=this.ctx.createBuffer(1,t,this.ctx.sampleRate),s=n.getChannelData(0);if("pink"===e){let e=0,n=0,i=0,a=0,r=0,o=0,c=0;for(let l=0;l<t;l++){const t=2*Math.random()-1;e=.99886*e+.0555179*t,n=.99332*n+.0750759*t,i=.969*i+.153852*t,a=.8665*a+.3104856*t,r=.55*r+.5329522*t,o=-.7616*o-.016898*t,s[l]=e+n+i+a+r+o+c+.5362*t,s[l]*=.11,c=.115926*t}}else{let e=0;for(let n=0;n<t;n++){const t=2*Math.random()-1;s[n]=(e+.02*t)/1.02,e=s[n],s[n]*=3.5}}return n}setupEngine(){if(!this.ctx||!this.masterGain)return;const e=this.createNoiseBuffer("brown");if(e){const t=this.ctx.createBufferSource();t.buffer=e,t.loop=!0;const n=this.ctx.createBiquadFilter();n.type="lowpass",n.frequency.value=100;const s=this.ctx.createGain();s.gain.value=0,t.connect(n),n.connect(s),s.connect(this.masterGain),t.start(),this.engineRefs.rumbleFilter=n,this.engineRumbleGain=s}const t=this.ctx.createOscillator();t.type="sawtooth",t.frequency.value=60;const n=this.ctx.createGain();n.gain.value=0;const s=this.ctx.createOscillator();s.type="sine",s.frequency.value=12;const i=this.ctx.createGain();i.gain.value=.15,s.connect(i),i.connect(n.gain);const a=this.ctx.createBiquadFilter();a.type="lowpass",a.frequency.value=400,t.connect(a),a.connect(n),n.connect(this.masterGain),t.start(),s.start(),this.engineRefs.pistonOsc=t,this.engineRefs.pistonLFO=s}setupAmbience(){if(!this.ctx||!this.masterGain)return;const e=this.createNoiseBuffer("pink");if(!e)return;const t=this.ctx.createBufferSource();t.buffer=e,t.loop=!0;const n=this.ctx.createBiquadFilter();n.type="lowpass",n.frequency.value=350;const s=this.ctx.createGain();s.gain.value=0,t.connect(n),n.connect(s),s.connect(this.masterGain),t.start(),this.windRefs.roadGain=s;const i=this.ctx.createBufferSource();i.buffer=e,i.loop=!0;const a=this.ctx.createBiquadFilter();a.type="bandpass",a.frequency.value=600,a.Q.value=.3;const r=this.ctx.createGain();r.gain.value=0,i.connect(a),a.connect(r),r.connect(this.masterGain),i.start(),this.windRefs.windGain=r}setupScanner(){if(!this.ctx||!this.masterGain)return;const e=.5*this.ctx.sampleRate,t=this.ctx.createBuffer(1,e,this.ctx.sampleRate),n=t.getChannelData(0);for(let r=0;r<e;r++)n[r]=.5*(2*Math.random()-1);const s=this.ctx.createBufferSource();s.buffer=t,s.loop=!0;const i=this.ctx.createBiquadFilter();i.type="bandpass",i.frequency.value=2500,i.Q.value=8;const a=this.ctx.createGain();a.gain.value=0,s.connect(i),i.connect(a),a.connect(this.masterGain),s.start(),this.scannerNode=s,this.scannerGain=a}setupHorn(){if(!this.ctx||!this.masterGain)return;const e=this.ctx.createOscillator();e.type="sawtooth",e.frequency.value=185;const t=this.ctx.createOscillator();t.type="sawtooth",t.frequency.value=233;const n=this.ctx.createGain();n.gain.value=0,e.connect(n),t.connect(n),n.connect(this.masterGain),e.start(),t.start(),this.hornOsc1=e,this.hornOsc2=t,this.hornGain=n}loadAirBrake(){return n(this,null,function*(){if(this.ctx&&this.masterGain)try{const e=yield fetch("/audio/Truck-Recycling-Air_Brake-Foot_Pedal.mp3");if(!e.ok)throw new Error(`HTTP ${e.status}: ${e.statusText}`);const t=yield e.arrayBuffer();this.airBrakeBuffer=yield this.ctx.decodeAudioData(t)}catch(e){}})}loadEngineStart(){return n(this,null,function*(){if(this.ctx&&this.masterGain)try{const e=yield fetch("/audio/Truck-Engine-Start.mp3");if(!e.ok)throw new Error(`HTTP ${e.status}: ${e.statusText}`);const t=yield e.arrayBuffer();this.engineStartBuffer=yield this.ctx.decodeAudioData(t)}catch(e){}})}loadEngineRun(){return n(this,null,function*(){if(this.ctx&&this.masterGain)try{const e=yield fetch("/audio/Truck-Engine-Run2.mp3");if(!e.ok)throw new Error(`HTTP ${e.status}: ${e.statusText}`);const t=yield e.arrayBuffer();this.engineRunBuffer=yield this.ctx.decodeAudioData(t),this.engineRunGain=this.ctx.createGain(),this.engineRunGain.gain.value=0,this.engineRunGain.connect(this.masterGain)}catch(e){}})}triggerEngineStart(){if(!this.ctx||!this.engineStartBuffer)return;if(this.engineStartPlaying)return;const e=this.ctx.currentTime,t=this.engineStartBuffer.duration;this.engineStartPlaying=!0,this.engineRunBuffer&&this.engineRunGain&&(this.engineRunSource=this.ctx.createBufferSource(),this.engineRunSource.buffer=this.engineRunBuffer,this.engineRunSource.loop=!0,this.engineRunSource.connect(this.engineRunGain),this.engineRunGain.gain.cancelScheduledValues(e),this.engineRunGain.gain.setValueAtTime(0,e),this.engineRunGain.gain.setValueAtTime(0,e+2),this.engineRunGain.gain.linearRampToValueAtTime(.15,e+2+.3),this.engineRunGain.gain.linearRampToValueAtTime(.25,e+t),this.engineRunSource.start(e));const n=this.ctx.createBufferSource();n.buffer=this.engineStartBuffer;const s=this.ctx.createGain();s.gain.setValueAtTime(0,e),s.gain.linearRampToValueAtTime(1,e+.1),s.gain.setValueAtTime(1,e+2),s.gain.linearRampToValueAtTime(0,e+t),n.connect(s),s.connect(this.masterGain),n.start(e),n.stop(e+t),n.onended=()=>{this.engineStartPlaying=!1}}triggerAirBrake(){if(!this.ctx||!this.airBrakeBuffer)return;const e=this.ctx.currentTime,t=this.airBrakeBuffer.duration,n=this.ctx.createBufferSource();n.buffer=this.airBrakeBuffer;const s=this.ctx.createGain();s.gain.setValueAtTime(0,e),s.gain.linearRampToValueAtTime(1.2,e+.05),s.gain.setValueAtTime(1.2,e+Math.max(0,t-.2)),s.gain.linearRampToValueAtTime(0,e+t),n.connect(s),s.connect(this.masterGain),n.start(e),n.stop(e+t)}triggerHornOnly(){if(!this.ctx||!this.hornGain)return;const e=this.ctx.currentTime;this.hornGain.gain.cancelScheduledValues(e),this.hornGain.gain.setValueAtTime(0,e),this.hornGain.gain.linearRampToValueAtTime(.2,e+.05),this.hornGain.gain.linearRampToValueAtTime(.2,e+.9),this.hornGain.gain.linearRampToValueAtTime(0,e+1),this.hornGain.gain.linearRampToValueAtTime(.2,e+1.2),this.hornGain.gain.linearRampToValueAtTime(.2,e+1.7),this.hornGain.gain.linearRampToValueAtTime(0,e+1.8)}triggerHorn(){if(!this.ctx||!this.hornGain)return;const e=this.ctx.currentTime;this.triggerAirBrake(),this.hornGain.gain.cancelScheduledValues(e),this.hornGain.gain.setValueAtTime(0,e),this.hornGain.gain.linearRampToValueAtTime(.2,e+.3),this.hornGain.gain.linearRampToValueAtTime(.2,e+1.2),this.hornGain.gain.linearRampToValueAtTime(0,e+1.3),this.hornGain.gain.linearRampToValueAtTime(.2,e+1.5),this.hornGain.gain.linearRampToValueAtTime(.2,e+2),this.hornGain.gain.linearRampToValueAtTime(0,e+2.1)}triggerChirp(){if(!this.ctx||!this.masterGain||this.masterGain.gain.value<.01)return;const e=this.ctx.currentTime,t=this.ctx.createOscillator();t.type="sine",t.frequency.setValueAtTime(2e3,e),t.frequency.exponentialRampToValueAtTime(1e3,e+.1);const n=this.ctx.createGain();n.gain.setValueAtTime(.05,e),n.gain.exponentialRampToValueAtTime(.001,e+.1),t.connect(n),n.connect(this.masterGain),t.start(e),t.stop(e+.2)}reduceEngineVolume(){if(!this.ctx||!this.engineRunGain)return;const e=this.ctx.currentTime;this.engineRunGain.gain.cancelScheduledValues(e),this.engineRunGain.gain.setValueAtTime(this.engineRunGain.gain.value,e),this.engineRunGain.gain.linearRampToValueAtTime(.15,e+1)}update(e){this.ctx&&"suspended"!==this.ctx.state&&(this.engineRefs.pistonLFO&&(this.engineRefs.pistonLFO.frequency.value=12+.5*Math.sin(.3*e)),this.engineRefs.rumbleFilter&&(this.engineRefs.rumbleFilter.frequency.value=100+5*Math.sin(.15*e)),this.windRefs.windGain&&(this.windRefs.windGain.gain.value=.1+.02*Math.sin(.2*e)))}updateScannerVolume(e,t){if(this.ctx&&this.scannerGain)if(e){const e=.06+.02*Math.sin(60*t);this.scannerGain.gain.setTargetAtTime(e,this.ctx.currentTime,.05)}else this.scannerGain.gain.setTargetAtTime(0,this.ctx.currentTime,.1)}dispose(){this.ctx&&(this.ctx.close(),this.ctx=null),this.initialized=!1}}const ae=({text:e,delay:t=0,speed:n=30,onComplete:s,className:i=""})=>{const[a,o]=l.useState(""),[c,d]=l.useState(!1),u=l.useRef(0);l.useEffect(()=>{if(t>0){const e=setTimeout(()=>{h()},t);return()=>clearTimeout(e)}h()},[e,t,n]);const h=()=>{const t=setInterval(()=>{u.current<e.length?(o(e.slice(0,u.current+1)),u.current++):(clearInterval(t),d(!0),s&&s())},n);return()=>clearInterval(t)};return r.jsxs("span",{className:i,children:[a,!c&&r.jsx("span",{className:"typewriter-cursor",children:"|"})]})},re=({scrollProgress:e,activePhase:t,sectionName:n})=>r.jsx("div",{className:"hud-progress",children:r.jsxs("div",{className:"hud-progress-bar",children:[r.jsx("div",{className:"hud-progress-fill",style:{height:`${e}%`}}),[{position:0,label:"START",sublabel:"Intro Phase",range:[0,14]},{position:15,label:"VELOCITY",sublabel:"Real-Time Tracking",range:[15,34]},{position:35,label:"SENSOR HEAD",sublabel:"Fuel Detection",range:[35,49]},{position:50,label:"SEQ 2 START",sublabel:"Second Sequence",range:[50,64]},{position:65,label:"VELOCITY",sublabel:"Performance Data",range:[65,84]},{position:85,label:"SENSOR HEAD",sublabel:"Component Details",range:[85,99]},{position:100,label:"COMPLETE",sublabel:"Journey End",range:[100,100]}].map((t,n)=>{const s=e>=t.range[0]&&e<=t.range[1],i=e>=t.position;return r.jsx("div",{className:`hud-marker ${i?"active":""} ${s?"current":""}`,style:{top:`${t.position}%`},children:r.jsxs("div",{className:"hud-marker-text",children:[r.jsxs("div",{className:"hud-marker-label",children:[e,"% ",t.label]}),r.jsx("div",{className:"hud-marker-sublabel",children:t.sublabel})]})},n)})]})});function oe(){const e=l.useRef(null),t=l.useRef(null),n=l.useRef(null),s=l.useRef([]),[i,a]=l.useState(!0),[c,d]=l.useState(0),[h,f]=l.useState(!0),[g,x]=l.useState(!1),[v,N]=l.useState(0),[j,E]=l.useState(!1),[M,G]=l.useState(0),[A,P]=l.useState(0),te=l.useRef(!1),oe=l.useRef(null),ce=l.useRef(!1),le=l.useRef(!1),de=l.useRef(null),ue=l.useRef(null),he=l.useRef(null),fe=l.useRef(null),me=l.useRef(null),pe=l.useRef(null),ge=l.useRef(null),xe=l.useRef(null),we=l.useRef(null),ve=l.useRef(null),ye=l.useRef(null),Te=l.useRef(null),be=l.useRef(null),Ne=l.useRef(null),Se=l.useRef(null),je=l.useRef(null),Re=l.useRef(null),ke=l.useRef(null),Ee=l.useRef(null),Me=l.useRef(null);t.current||(t.current=new ie,t.current.init());return l.useEffect(()=>(h&&(document.body.style.overflow="hidden"),()=>{document.body.style.overflow="auto"}),[h]),l.useEffect(()=>{window.scrollTo(0,0),document.documentElement.scrollTop=0,document.body.scrollTop=0},[]),l.useEffect(()=>{const e=M-A;if(Math.abs(e)<.5)return void P(M);const t=setTimeout(()=>{P(t=>{const n=e>0?1:-1,s=t+n;return n>0&&s>=M||n<0&&s<=M?M:s})},5);return()=>clearTimeout(t)},[M,A]),l.useEffect(()=>{const e=()=>{localStorage.setItem("last-main-page-update",Date.now().toString())};e();const t=setInterval(e,2e3);return()=>clearInterval(t)},[]),l.useEffect(()=>{const e=e=>{var n;if(e.key)try{const s=e.newValue?JSON.parse(e.newValue):null;switch(e.key){case"truck-config":if(s&&de.current){const e=s.position,t=s.rotation,n=s.scale;de.current.position.set(e[0],e[1],e[2]),de.current.rotation.set(t[0],t[1],t[2]),de.current.scale.set(n[0],n[1],n[2])}break;case"fuel-sensor-config":if(s&&ue.current){const e=s.position,t=s.rotation;ue.current.position.set(e[0],e[1],e[2]),ue.current.rotation.set(t[0],t[1],t[2]),ue.current.scale.setScalar(s.scale)}break;case"telematics-display-config":if(s&&he.current){const e=s.position,t=s.rotation,n=s.size;he.current.position.set(e[0],e[1],e[2]),he.current.rotation.set(t[0],t[1],t[2]);const i=he.current.children[0];i&&i.geometry&&(i.geometry.dispose(),i.geometry=new y(n[0],n[1]))}break;case"logo-config":if(s&&fe.current){const e=s.position,t=s.rotation,n=s.scale,i=s.offsetZ,a=s.visible;fe.current.position.set(e[0],e[1],e[2]),fe.current.rotation.set(t[0],t[1],t[2]),fe.current.scale.set(n[0],n[1],1);const r=new R(0,0,i);r.applyQuaternion(fe.current.quaternion),fe.current.position.add(r),fe.current.visible=a}break;case"audio-state":s&&(a(s.isMuted),null==(n=t.current)||n.toggleMute(s.isMuted))}}catch(s){}};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[i]),l.useEffect(()=>{if(!e.current)return;const n=new C,i=15789544;n.background=new I(i),n.fog=new L(i,.012),je.current=n;const r=new V(45,window.innerWidth/window.innerHeight,.1,2e3);r.position.set(0,3,-20);const o=new B({antialias:!0,alpha:!1});o.setSize(window.innerWidth,window.innerHeight),o.setPixelRatio(Math.min(window.devicePixelRatio,2)),o.outputColorSpace=S,o.shadowMap.enabled=!0,o.shadowMap.type=O,e.current.appendChild(o.domElement);const c=new z(16777215,1);n.add(c);const l=new D(16777215,2.5);l.position.set(25,35,-15),l.castShadow=!0,l.shadow.mapSize.width=2048,l.shadow.mapSize.height=2048,l.shadow.camera.left=-30,l.shadow.camera.right=30,l.shadow.camera.top=30,l.shadow.camera.bottom=-30,l.shadow.camera.near=1,l.shadow.camera.far=100,l.shadow.bias=-5e-4,l.shadow.radius=4,n.add(l);const h=new D(16777215,1.4);h.position.set(-20,12,30),n.add(h);const f=new D(16777215,1.2);f.position.set(15,10,30),n.add(f);const g=new p({color:14737632,roughness:.7,metalness:.08,envMapIntensity:.3}),x=new w({color:6710886,transparent:!0,opacity:.4});Re.current=g,ke.current=x;const v=document.createElement("canvas");v.width=512,v.height=512;const N=v.getContext("2d"),j=N.createRadialGradient(256,256,0,256,256,256);j.addColorStop(0,"#e0dcd4"),j.addColorStop(.3,"#e8e4dc"),j.addColorStop(.6,"#ece9e2"),j.addColorStop(1,"#f0ede8"),N.fillStyle=j,N.fillRect(0,0,512,512);const M=new k(v);M.wrapS=W,M.wrapT=W;const A=new m(new y(300,300),new p({map:M,roughness:1,metalness:0,side:b,fog:!0}));A.rotation.x=-Math.PI/2,A.position.y=-1.1,A.receiveShadow=!0,n.add(A);const P=new T({color:12460078,transparent:!0,opacity:.9,side:b,depthWrite:!1}),H=[],$=new m(new y(.25,200),P);$.rotation.x=-Math.PI/2,$.position.set(-2.5,-1.09,-5),$.userData.lane="left-border",$.userData.solid=!0,n.add($),H.push($);for(let e=0;e<80;e++){const t=new m(new y(.2,1.5),P);t.rotation.x=-Math.PI/2,t.position.set(1.1,-1.09,3*e-120),t.userData.lane="center",n.add(t),H.push(t)}const U=new m(new y(.25,200),P);U.rotation.x=-Math.PI/2,U.position.set(4.7,-1.09,-5),U.userData.lane="right-border",U.userData.solid=!0,n.add(U),H.push(U);const Q=new u;n.add(Q),Ne.current=Q;const K=new F;let Y;const J={current:0};let X=0,_=0;const Z=()=>{var e;const i=K.getDelta(),a=K.getElapsedTime();if(_<2.5){_+=i;const e=Math.min(_/2.5,1),t=e*e*(3-2*e);Re.current&&(Re.current.opacity=t,Re.current.transparent=!0),ke.current&&(ke.current.opacity=.4*t)}let c=!1;if(te.current&&!ce.current){null===oe.current&&(oe.current=a);const n=a-oe.current;if(n<3.5){c=!0;const s=Math.min(n/3,1),i=1-Math.pow(1-s,3);if(Q.position.z=120*(1-i),n>2&&n<2.02&&(null==(e=t.current)?void 0:e.masterGain)&&t.current.masterGain.gain.value>0&&t.current.triggerHorn(),n>2&&n<2.5){const e=.2*(Math.random()-.5);r.position.y+=e}}else ce.current||(Q.position.z=0,ce.current=!0)}if((te.current&&ce.current||!te.current)&&(Q.position.z=0),J.current>.02||te.current){const e=16.67;H.forEach(t=>{t.userData.solid||(t.position.z+=i*e,"center"===t.userData.lane&&t.position.z>100&&(t.position.z-=200))})}Me.current&&function(e,t,n=160,s=100,i=-300,a=[60,20]){const r=e.geometry.attributes.position.array;for(let o=2;o<r.length;o+=3){const e=1+o%3*.3;r[o]+=t*n*e,r[o]>s&&(r[o]=i,r[o-2]=(Math.random()-.5)*a[0],r[o-1]=Math.random()*a[1])}e.geometry.attributes.position.needsUpdate=!0}(Me.current,i),Q.position.y=.015*Math.sin(15*a);if(s.current.length>0&&s.current.forEach(e=>{e.rotation.x+=4*i}),Math.floor(2*a)!==Math.floor(2*(a-i))){const e=96+10*Math.sin(.5*a),t=.002*a,n=Math.max(.15,.65-t);Ee.current&&function(e,t){const n=ee(t);e.map&&e.map.dispose(),e.map=n,e.needsUpdate=!0}(Ee.current,{speed:e,fuelLevel:n})}const l=Math.min(Math.max(J.current,0),1),u={pos:new R(0,3,-20),look:new R(0,2,0)},h={pos:new R(-18,5,22),look:new R(0,1.5,-5)},f={pos:new R(-22,8,45),look:new R(0,2,-10)},m={pos:new R(12,4,-5),look:new R(3.1,1.5,-5)},p={pos:new R(7,2.5,-5),look:new R(3.1,1,-5)},g={pos:new R(3.1,8,-5),look:new R(3.1,0,-5)},x=new R,w=new R;let v=0;if(c)x.copy(f.pos),w.copy(f.look),v=0;else if(te.current&&ce.current&&l<.15){const e=Math.min(l/.15,1),t=e*e*(3-2*e);x.lerpVectors(f.pos,h.pos,t),w.lerpVectors(f.look,h.look,t),v=0}else if(l<.15){const e=Math.min(l/.15,1),t=e*e*(3-2*e);x.lerpVectors(u.pos,h.pos,t),w.lerpVectors(u.look,h.look,t),v=0}else if(l<.35){const e=Math.min((l-.15)/.2,1);x.lerpVectors(h.pos,m.pos,.3*e),w.lerpVectors(h.look,m.look,.3*e),v=0}else if(l<.55){const e=Math.min((l-.35)/.2,1),t=e*e*(3-2*e);x.lerpVectors(m.pos,p.pos,.5*t),w.lerpVectors(m.look,p.look,.5*t),v=1}else if(l<.75){const e=Math.min((l-.55)/.2,1),t=e*e*(3-2*e);x.lerpVectors(p.pos,p.pos,t),w.lerpVectors(p.look,p.look,t),v=2}else{const e=Math.min((l-.75)/.25,1),t=e*e*(3-2*e);x.lerpVectors(p.pos,g.pos,t),w.lerpVectors(p.look,g.look,t),v=3}v!==X&&(d(v),X=v);const y=.15*Math.sin(.5*a);if(x.y+=y,r.position.lerp(x,.08),r.lookAt(w),1===X&&Se.current){const e=new R;Se.current.getWorldPosition(e);const t=new q;Q.getWorldQuaternion(t)}if(2===X){const e=new R,t=(t,n,s,i,a=!1)=>{if(!n||!s)return;t.getWorldPosition(e),e.project(r);const o=(.5*e.x+.5)*window.innerWidth,c=(-.5*e.y+.5)*window.innerHeight,l=a?.1*window.innerWidth:.66*window.innerWidth,d=window.innerHeight*i,u=o+.5*(l-o),h=`M ${o} ${c} L ${u} ${c} L ${u} ${d} L ${l} ${d}`;n.setAttribute("d",h),s.setAttribute("cx",String(o)),s.setAttribute("cy",String(c))};ye.current&&t(ye.current,me.current,xe.current,.25,!1),Te.current&&t(Te.current,pe.current,we.current,.5,!1),be.current&&t(be.current,ge.current,ve.current,.75,!1)}o.render(n,r),Y=requestAnimationFrame(Z)};let ne=!1,se=!1;const ie=()=>{var e,n;const s=document.documentElement.scrollHeight-window.innerHeight,i=Math.min(Math.max(window.scrollY/s,0),1);G(Math.round(100*i)),E(i>.03),i<.5&&te.current&&(te.current=!1,ce.current=!1,oe.current=null),i>=.5&&!te.current?(te.current=!0,J.current=0):te.current?ce.current?J.current=2*(i-.5):J.current=0:J.current=2*i,!ne&&J.current>0&&(null==(e=t.current)?void 0:e.masterGain)&&t.current.masterGain.gain.value>0&&(t.current.triggerAirBrake(),ne=!0),!se&&J.current>.06&&(null==(n=t.current)?void 0:n.masterGain)&&t.current.masterGain.gain.value>0&&(t.current.triggerHornOnly(),t.current.reduceEngineVolume(),se=!0)},ae=()=>{r.aspect=window.innerWidth/window.innerHeight,r.updateProjectionMatrix(),o.setSize(window.innerWidth,window.innerHeight)};window.addEventListener("scroll",ie),window.addEventListener("resize",ae);let re=!1;const le=()=>{!re&&t.current&&(t.current.initialized||t.current.init(),t.current.masterGain&&0===t.current.masterGain.gain.value&&(t.current.toggleMute(!1),a(!1),re=!0))};return document.addEventListener("click",le),Z(),()=>{window.removeEventListener("scroll",ie),window.removeEventListener("resize",ae),document.removeEventListener("click",le),cancelAnimationFrame(Y),e.current&&o.domElement&&e.current.removeChild(o.domElement),o.dispose()}},[]),r.jsxs("div",{className:"app-container",children:[h&&r.jsx("div",{className:"intro-screen "+(g?"fading-out":"visible"),children:r.jsxs("div",{className:"intro-content",children:[r.jsx("img",{src:"/logo.png",alt:"Translink",className:"intro-logo"}),r.jsx("p",{className:"intro-subtitle",children:"FLEET TELEMATICS"}),100===v?r.jsx("button",{onClick:()=>{t.current&&!le.current?(i&&(a(!1),t.current.toggleMute(!1)),t.current.triggerEngineStart(),le.current=!0):le.current,x(!0),setTimeout(()=>{f(!1),document.body.style.overflow="auto"},1e3)},className:"intro-enter-button",children:"ENTER EXPERIENCE"}):r.jsxs("div",{className:"loading-indicator",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{className:"loading-text",children:"Loading 3D Experience..."})]})]})}),r.jsx("div",{ref:e,className:"canvas-container"}),!h&&r.jsx(re,{scrollProgress:A,activePhase:c,sectionName:((e,t)=>{if(50===e)return"EXTENDED INTRO";const n=e>50?" (SEQ 2)":"";switch(t){case 0:return e<=15?`INTRO${n}`:`VELOCITY${n}`;case 1:return`SENSOR HEAD${n}`;case 2:return`EXPLODED VIEW${n}`;case 3:return`TOP VIEW${n}`;default:return`INTRO${n}`}})(M,c)}),r.jsxs("div",{className:"top-bar",children:[r.jsx("div",{className:"top-bar-logo",children:r.jsx("img",{src:"/logo.png",alt:"Translink Logo",className:"logo-image"})}),r.jsx("div",{className:"top-bar-controls",children:r.jsxs("button",{onClick:()=>{var e;const n=!i;a(n),null==(e=t.current)||e.toggleMute(n)},className:"audio-button group",children:[i?r.jsx(J,{className:"audio-button-icon",size:16}):r.jsx(Y,{className:"audio-button-icon active",size:16}),r.jsxs("span",{className:"audio-button-text",children:["AUDIO ",i?"OFF":"ON"]})]})})]}),r.jsx("div",{className:"bottom-card",children:r.jsx("div",{className:"bottom-card-content",children:r.jsxs("div",{className:"bottom-card-inner",children:[r.jsx("div",{className:"bottom-card-indicator"}),r.jsxs("div",{children:[r.jsxs("h1",{className:"bottom-card-title",children:["FUEL LEVEL ",r.jsx("span",{className:"bottom-card-title-accent",children:"SENSOR PRO"})]}),r.jsx("p",{className:"bottom-card-subtitle",children:"TRANSLINK FUEL TELEMATICS"})]})]})})}),r.jsxs("div",{className:"content-wrapper",children:[r.jsx("section",{className:"section intro-section "+(0!==c||j?"hidden":"visible"),children:r.jsxs("div",{className:"intro-section-content",children:[r.jsxs("div",{className:"intro-section-badge",children:[r.jsx("div",{className:"intro-section-icon-wrapper",children:r.jsx(K,{className:"intro-section-icon",size:24})}),r.jsx("span",{className:"intro-section-badge-text",children:"TRANSLINK SOLUTIONS"})]}),r.jsx("h2",{className:"intro-section-heading",children:"REAL-TIME"}),r.jsx("h3",{className:"intro-section-subheading",children:"FUEL MONITORING"}),r.jsx("div",{className:"intro-section-divider"}),r.jsxs("div",{className:"intro-section-description",children:[r.jsxs("p",{className:"intro-section-description-main",children:["High-precision fuel level monitoring with ",r.jsx("span",{className:"intro-section-description-accent",children:"±1% static accuracy"}),"."]}),r.jsx("p",{className:"intro-section-description-secondary",children:"Real-time tracking, theft detection, and seamless fleet integration for comprehensive fuel management."})]}),r.jsxs("div",{className:"intro-section-stats",children:[r.jsxs("div",{className:"intro-section-stat",children:[r.jsx("div",{className:"intro-section-stat-label",children:"Accuracy"}),r.jsx("div",{className:"intro-section-stat-value",children:"±1%"})]}),r.jsxs("div",{className:"intro-section-stat",children:[r.jsx("div",{className:"intro-section-stat-label",children:"Resolution"}),r.jsx("div",{className:"intro-section-stat-value",children:"<0.5mm"})]}),r.jsxs("div",{className:"intro-section-stat",children:[r.jsx("div",{className:"intro-section-stat-label",children:"Rating"}),r.jsx("div",{className:"intro-section-stat-value",children:"IP67"})]})]})]})}),r.jsxs("div",{className:"svg-overlay "+(2===c?"visible":"hidden"),children:[r.jsxs("svg",{className:"svg-canvas",children:[r.jsxs("defs",{children:[r.jsx("marker",{id:"dot",markerWidth:"8",markerHeight:"8",refX:"4",refY:"4",children:r.jsx("circle",{cx:"4",cy:"4",r:"2",fill:"#ff5555"})}),r.jsxs("filter",{id:"glow",children:[r.jsx("feGaussianBlur",{stdDeviation:"2.5",result:"coloredBlur"}),r.jsxs("feMerge",{children:[r.jsx("feMergeNode",{in:"coloredBlur"}),r.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),r.jsx("path",{ref:me,className:"svg-connector-path"}),r.jsx("circle",{ref:xe,r:"5",className:"svg-connector-dot"}),r.jsx("path",{ref:pe,className:"svg-connector-path"}),r.jsx("circle",{ref:we,r:"5",className:"svg-connector-dot"}),r.jsx("path",{ref:ge,className:"svg-connector-path"}),r.jsx("circle",{ref:ve,r:"5",className:"svg-connector-dot"})]}),r.jsx("div",{className:"info-card info-card-sensor-head",children:r.jsxs("div",{className:"info-card-container",children:[r.jsx("div",{className:"info-card-top-bar"}),r.jsxs("div",{className:"info-card-content",children:[r.jsxs("div",{className:"info-card-header",children:[r.jsxs("div",{className:"info-card-header-left",children:[r.jsx("div",{className:"info-card-icon-wrapper",children:r.jsx(U,{className:"info-card-icon",size:24})}),r.jsxs("div",{className:"info-card-header-text",children:[r.jsx("div",{className:"info-card-component-label",children:"COMPONENT 01"}),r.jsx("h3",{className:"info-card-title",children:"SENSOR HEAD"})]})]}),r.jsxs("div",{className:"info-card-header-right",children:[r.jsx("div",{className:"info-card-status-dot"}),r.jsx("div",{className:"info-card-status-text",children:"ACTIVE"})]})]}),r.jsx("p",{className:"info-card-description",children:r.jsx(ae,{text:"Advanced MCU with remote calibration, self-diagnostics, and real-time data feed. Supports CAN, RS232, and Modbus interfaces.",delay:800,speed:25})}),r.jsxs("div",{className:"info-card-tags",children:[r.jsx("span",{className:"info-card-tag",children:"REMOTE CAL"}),r.jsx("span",{className:"info-card-tag",children:"MULTI-IF"})]})]})]})}),r.jsx("div",{className:"info-card info-card-fuel-probe",children:r.jsxs("div",{className:"info-card-container",children:[r.jsx("div",{className:"info-card-top-bar"}),r.jsxs("div",{className:"info-card-content",children:[r.jsxs("div",{className:"info-card-header",children:[r.jsxs("div",{className:"info-card-header-left",children:[r.jsx("div",{className:"info-card-icon-wrapper",children:r.jsx(H,{className:"info-card-icon",size:24})}),r.jsxs("div",{className:"info-card-header-text",children:[r.jsx("div",{className:"info-card-component-label",children:"COMPONENT 02"}),r.jsx("h3",{className:"info-card-title",children:"FUEL PROBE"})]})]}),r.jsxs("div",{className:"info-card-header-right",children:[r.jsx("div",{className:"info-card-status-dot"}),r.jsx("div",{className:"info-card-status-text",children:"ACTIVE"})]})]}),r.jsx("p",{className:"info-card-description",children:r.jsx(ae,{text:"High-precision capacitive probe with <0.5mm resolution. Features inclinometer for tilt compensation and anti-slosh technology for stable readings.",delay:1400,speed:25})}),r.jsxs("div",{className:"info-card-tags",children:[r.jsx("span",{className:"info-card-tag",children:"±1% ACCURACY"}),r.jsx("span",{className:"info-card-tag",children:"ANTI-SLOSH"})]})]})]})}),r.jsx("div",{className:"info-card info-card-protection-cage",children:r.jsxs("div",{className:"info-card-container",children:[r.jsx("div",{className:"info-card-top-bar"}),r.jsxs("div",{className:"info-card-content",children:[r.jsxs("div",{className:"info-card-header",children:[r.jsxs("div",{className:"info-card-header-left",children:[r.jsx("div",{className:"info-card-icon-wrapper",children:r.jsx(Q,{className:"info-card-icon",size:24})}),r.jsxs("div",{className:"info-card-header-text",children:[r.jsx("div",{className:"info-card-component-label",children:"COMPONENT 03"}),r.jsx("h3",{className:"info-card-title",children:"PROTECTION CAGE"})]})]}),r.jsxs("div",{className:"info-card-header-right",children:[r.jsx("div",{className:"info-card-status-dot"}),r.jsx("div",{className:"info-card-status-text",children:"ACTIVE"})]})]}),r.jsx("p",{className:"info-card-description",children:r.jsx(ae,{text:"Corrosion-resistant protective cage with chemical-resistant materials. Shock-resistant design ensures durability in harsh environments.",delay:2e3,speed:25})}),r.jsxs("div",{className:"info-card-tags",children:[r.jsx("span",{className:"info-card-tag",children:"IP67"}),r.jsx("span",{className:"info-card-tag",children:"SHOCK-PROOF"})]})]})]})})]}),r.jsx("section",{className:"section final-section "+(3===c&&M>=96?"visible":"hidden"),children:r.jsxs("div",{className:"final-section-content",children:[r.jsx("div",{className:"final-section-icon-wrapper",children:r.jsx("div",{className:"final-section-icon-box",children:r.jsx(X,{className:"final-section-icon",size:32})})}),r.jsx("h3",{className:"final-section-heading",children:"FLEET READY"}),r.jsx("p",{className:"final-section-description",children:"Seamless integration with your existing fleet management system"}),r.jsxs("div",{className:"final-section-stats",children:[r.jsxs("div",{className:"final-section-stat",children:[r.jsx("div",{className:"final-section-stat-value",children:"24/7"}),r.jsx("div",{className:"final-section-stat-label",children:"Monitoring"})]}),r.jsx("div",{className:"final-section-divider"}),r.jsxs("div",{className:"final-section-stat",children:[r.jsx("div",{className:"final-section-stat-value",children:"±1%"}),r.jsx("div",{className:"final-section-stat-label",children:"Accuracy"})]}),r.jsx("div",{className:"final-section-divider"}),r.jsxs("div",{className:"final-section-stat",children:[r.jsx("div",{className:"final-section-stat-value",children:"IP67"}),r.jsx("div",{className:"final-section-stat-label",children:"Rated"})]})]}),r.jsx("button",{className:"final-section-cta group",children:r.jsxs("span",{className:"final-section-cta-content",children:["Request Demo",r.jsx($,{className:"final-section-cta-icon",size:20})]})}),r.jsx("p",{className:"final-section-footer",children:"Fleet Integration Ready"})]})}),r.jsx("section",{className:"spacer-section"}),r.jsx("section",{className:"spacer-section"})]}),r.jsxs("div",{className:"scroll-indicator "+(3===c?"hidden":"visible"),children:[r.jsx("div",{className:"scroll-indicator-icon-wrapper",children:r.jsx($,{className:"scroll-indicator-icon",size:20})}),r.jsx("span",{className:"scroll-indicator-text",children:"Scroll to Explore"})]}),je.current&&Ne.current&&Re.current&&ke.current&&r.jsx(Z,{scene:je.current,truckGroup:Ne.current,lightGrayMaterial:Re.current,edgeMaterial:ke.current,onProgress:e=>{N(e)},onLoad:(e,t)=>{n.current=e,s.current=t,de.current=e;const i=localStorage.getItem("truck-config");if(i){const t=JSON.parse(i);e.position.set(t.position[0],t.position[1],t.position[2]),e.rotation.set(t.rotation[0],t.rotation[1],t.rotation[2]),e.scale.set(t.scale[0],t.scale[1],t.scale[2])}N(100)},onLogoCreated:e=>{fe.current=e;const t=localStorage.getItem("logo-config");if(t){const n=JSON.parse(t);e.position.set(n.position[0],n.position[1],n.position[2]),e.rotation.set(n.rotation[0],n.rotation[1],n.rotation[2]),e.scale.set(n.scale[0],n.scale[1],1);const s=new R(0,0,n.offsetZ);s.applyQuaternion(e.quaternion),e.position.add(s),e.visible=n.visible}}}),je.current&&Ne.current&&r.jsx(ne,{scene:je.current,truckGroup:Ne.current,position:o.telematicsDisplay.position,rotation:o.telematicsDisplay.rotation,size:o.telematicsDisplay.size,initialData:{speed:85,fuelLevel:.65},onMaterialCreated:e=>{Ee.current=e},onGroupCreated:e=>{he.current=e}}),je.current&&r.jsx(se,{scene:je.current,count:400,color:12632256,onParticlesCreated:e=>{Me.current=e}}),je.current&&Ne.current&&r.jsx(_,{scene:je.current,truckGroup:Ne.current,onComponentsCreated:e=>{if(ye.current=e.sensorHeadGroup,Te.current=e.probeTube,be.current=e.cageGroup,Se.current=e.tankGroup,e.sensorHeadGroup.parent){ue.current=e.sensorHeadGroup.parent;const t=localStorage.getItem("fuel-sensor-config");if(t){const e=JSON.parse(t);ue.current.position.set(e.position[0],e.position[1],e.position[2]),ue.current.rotation.set(e.rotation[0],e.rotation[1],e.rotation[2]),ue.current.scale.setScalar(e.scale)}}}})]})}const ce=document.getElementById("root");if(!ce)throw new Error("Could not find root element to mount to");c.createRoot(ce).render(r.jsx(d.StrictMode,{children:r.jsx(oe,{})}));
